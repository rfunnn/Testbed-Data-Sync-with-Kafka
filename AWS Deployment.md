# PUSH DOCKER IMAGE TO AWS ECR

# install AWS CLI 
setup aws configure (access key, secret key, output)

aws ecr create-repository --repository-nname cloud-app-image --region ap-southeast-1

aws ecr get-login-password --region ap-southeast-1

aws ecr --region ap-southeast-1 | docker login -u AWS -p eyJwYXlsb2FkIjoiMWdXSG5tOXJhWmh0a3A5U0c3YXQzV3lDbFN4T0JkYlNsWE9XUThmZWNKTjkxL3htM0VpdEdROUc4ejhuYmZaUWNSR01rcUFLdzlxQjBYclBvNjVEeEhDZ1VReDc2R0lwYnFvMWgyTWRVZEc4dzluZzgwMG9NNDdLT2ZwQ1dnUStHT1JiNFRuSGhFbStEdVlaZG0waW1UanM5ZmVuVkpxZ09tZkpsdC9wKytScUN1RGNvTlA3L2EzU2lrY29yL2NRR09Pb2crZVZpM3BTeW1GeCt2UWJCS2JhTjNzcXhXVzlmUHUyZkFkQkRsZm5aVjdVdDFjU1llT0xPTms0RGRNLzVMY1FpeFR3S0dGZk9LUEJGZ2s2UDRNQ2xSOWRQbTVRUUdYSWNBL0hkTUJHcDRQOWU3TWtxUEx0eUFlMCtCRGFiWnhmWnlFdDg3NlN0RzVkZUFFbmhheFp1N0xoeFgyWjZzRFJMb0hVSUxrVERDaTRJSnc3ZS9pbTBFOEZRdWdvckJFYUtoM1k5c2dDV05GcXZIVEZ6czM5V3NBaWk1OEoxLzlEZUsxSE0vUGZSTzhueGc4Um5BRnhBQWhPaExudnQyUnpjd0NWdUZ5L0J0UitQRVNLRS9xKzdObnJjLytiOFJ5MjAxUVRheENOVmdZb3NHdzd5a0FzRHlmK2tVVWxuNmxXQ3lQelYza2Z6NzREMUxKSFFSclF1ZU5LVVQ2UmRkbU5FcEZRVnJWZXhHM29pZzlrczhyN3pxMnVTV2p5NHdHakJvVjQ4UGgvRDVZZkRQTnFtTml5NFpNTUdTMHIxOXE4R1Z4a2dnVHJtWDhtZ2tNSnp4U3dMcTBmMzF4emhuLzYvZms2SjN4MldpWG9vOEVKSTNrQmp6ck1LK1hGdWVSRFBqMUVySTlwSXUrUEZ0c0VDYm4yRGkveWozMms2TGNtVzYwRDFyUjhVNTJUTFZlNWg1cTdHN2RLbnlKMWNHZGh5NzJ0dWwvdGQrYVR1aHJXbFdhZzU1ZUZnWkZRK3pDVmMwWnNZb1RyZ0c1MTRIci9tSy9XM3VGbm83bnlmZmJpeTVzREYrd2VPVWZXYjJsQVU5VE8wUGlQUXo0NmpHVmRBa3JWcm1mRjMvdGdSRHNkRWRETXZpSHdRQk9mN0dQWVJoYzZidUpNSnFIVzdUN0JRd1hQWU9WZU91dzJzbkY0VWh2aFp2N0U5WGo2TEVmdVFEQ1d5TEVoYllUQmpXa2hmSGdrODFzaCtFVnhMYi9NREVONmc1ZGlmTzZsSGplaFN4YlRBZEVpR3NMZjVweDltUjFnOE5PT2hiVVI4UHNCSVh5L0FIb1R3TzFGWDR5NUZobG04RUI3IiwiZGF0YWtleSI6IkFRRUJBSGlkRXJaQ2ZoS09lRE0wOCtjUDVmdHlqdlE5WE1NU1E0cEswRlpudkFaWEpnQUFBSDR3ZkFZSkWUlaSUFXVURCQUV1TUJFRURPOEhTWnhPN2s1OFhndldDZ0lCRUlBNy8yd3NQajhmL3lQUk9jNEtUQjVEaHJ3YXVyZzBsRHZ3R0ZDSkY5YlBSTDlnT3FBbWx5UXZWTEhGdXVRY2pQMnhmMC96blRKMWI3Z3VWdkE9IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNjgxNzEyODU3fQ== 778684130340.dkr.ecr.ap-southeast-1.amazonaws.com/cloud-app-image

docker tag cloud-app-image:latest 778684130340.dkr.ecr.ap-southeast-1.amazonaws.com/cloud-app-image:latest

docker push 778684130340.dkr.ecr.ap-southeast-1.amazonaws.com/cloud-app-image:latest



## PUSH AWS ECR TO EKS

aws cloudformation deploy --template-file ./Documents/psm2/amazon-eks-vpc-private-subnets.yaml --stack-name my-new-stack

eksctl create cluster -f ./Documents/psm2/cluster.yaml --kubeconfig=/home/arfan/.kube/config

kubectl get svc

kubectl apply -f ./Documents/psm2/deployment.yaml

kubectl get deployments

kubectl apply -f ./Documents/psm2/service.yaml

kubectl get pods -o wide

kubectl get nodes -o wide
